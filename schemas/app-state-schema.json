{
  "$schema": "http://www.perspectiva.it/schemas/likeamap1",
  "type": "object",
  "title": "Configurazione Applicazione",
  "properties": {
    "title": {
      "title": "Titolo",
      "description": "Nome della mappa",
      "type": "string"
    },
    "restAPIUrl": {
      "title": "Url API Rest",
      "description": "Url assoluto o relativo delle API REST",
      "type": "string",
      "default": "/"
    },
    "templatesRepositoryUrl": {
      "title": "Url Template repository",
      "description": "Url assoluto o relativo per il caricamento dei template",
      "type": "string",
      "default": "templates"
    },
    "relationsRepositoryUrl": {
      "title": "Url Relation repository",
      "description": "Url assoluto o relativo per il caricamento delle relation",
      "type": "string",
      "default": "templates"
    },
    "startMapLon": {
      "title": "Longitudine",
      "description": "Longitudine iniziale",
      "default": 0,
      "type": "number"
    },
    "startMapLat": {
      "title": "Latitudine",
      "description": "Latitudine iniziale",
      "default": 0,
      "type": "number"
    },
    "startMapZoom": {
      "title": "Zoom",
      "description": "Zoom iniziale",
      "default": 13,
      "type": "integer"
    },
    "mapLon": {
      "title": "",
      "description": "Valore di sistema, lasciare a 0",
      "default": 0,
      "type": "number"
    },
    "mapLat": {
      "title": "",
      "description": "Valore di sistema, lasciare a 0",
      "default": 0,
      "type": "number"
    },
    "mapZoom": {
      "title": "",
      "description": "Valore di sistema, lasciare a 0",
      "default": 0,
      "type": "integer"
    },
    "searchProvider": {
      "title": "Provider di ricerca",
      "description": "Valore di sistema, lasciare a 0",
      "type": "string",
      "enum": ["nominatim", "wms_geoserver", "google", "bing"]
    },
    "searchProviderAddressUrl": {
      "title": "Url/KEY del provider di ricerca",
      "description": "Url del provider di ricerca per WMS o API KEY Google/Bing",
      "type": "string"
    },
    "searchProviderAddressField": {
      "title": "Campo del provider di ricerca vie",
      "description": "Campo in cui verrà effettuata la ricerca WMS",
      "type": "string"
    },
    "searchProviderHouseNumberUrl": {
      "title": "Url/KEY del provider di ricerca civici",
      "description": "Url del provider di ricerca per i civici",
      "type": "string"
    },
    "searchProviderHouseNumberField": {
      "title": "Campo del provider di ricerca civici",
      "description": "Campo in cui verrà effettuata la ricerca civici",
      "type": "string"
    },
    "drawFeatures": {
      "title": "",
      "description": "Valore di sistema, lasciare a null",
      "default": "",
      "type": "string"
    },
    "comuni": {
      "title": "",
      "description": "Valore di sistema, lasciare a null",
      "type": "array",
      "items": {}
    },
    "authentication": {
      "description": "Gestione autenticazione",
      "type": "object",
      "title": "Autenticazione",
      "properties": {
        "requiresAuth": {
          "title": "Autenticazione Richiesta",
          "description": "Richiede l'Autenticazione",
          "type": "boolean"
        },
        "authType": {
          "title": "Tipo di autenticazione",
          "description": "Tipo di autenticazione",
          "type": "string",
          "enum": ["anonymous", "basic", "custom"]
        },
        "authToken": {
          "title": "Token di autenticazione",
          "description": "Token di autenticazione",
          "type": "string"
        },
        "customAuthUrl": {
          "title": "Url di autenticazione custom",
          "description": "Template url. Lo user e password devono essere inseriti nei placeholder {{user}} {{password}}. Il risultato sarà inserito nella proprietà customAuthObject",
          "type": "string"
        },
        "customAuthObject": {
          "title": "Oggetto con le informazione di autenticazione custom",
          "description": "Oggetto con le informazione di autenticazione custom",
          "type": "object"
        },
        "required": []
      }
    },
    "modules": {
      "description": "Moduli abilitati",
      "type": "object",
      "title": "Moduli",
      "properties": {
        "layer-tree": {
          "title": "Livelli",
          "description": "Elenco dei livelli",
          "type": "boolean"
        },
        "search-tools": {
          "title": "Ricerca",
          "description": "Ricerca vie",
          "type": "boolean"
        },
        "print-tools": {
          "title": "Stampa",
          "description": "Stampa pdf",
          "type": "boolean"
        },
        "share-tools": {
          "title": "Condividi",
          "description": "Condividi mappe",
          "type": "boolean"
        },
        "map-tools": {
          "title": "Strumenti",
          "description": "Strumenti mappa",
          "type": "boolean"
        },
        "draw-tools": {
          "title": "Disegno",
          "description": "Strumenti di disegno",
          "type": "boolean"
        },
        "gps-tools": {
          "title": "GPS",
          "description": "Strumenti GPS",
          "type": "boolean"
        },
        "auth-tools": {
          "title": "Login",
          "description": "Accesso tramite login",
          "type": "boolean"
        }
      },
      "required": [
        "layer-tree",
        "search-tools",
        "print-tools",
        "share-tools",
        "map-tools",
        "draw-tools",
        "gps-tools"
      ]
    },
    "selectedInfoItems": {
      "description": "Elenco delle feature correntemente selezionate sulla mappa",
      "type": "array",
      "title": "Gruppi",
      "items": {
        "type": "object"
      }
    },
    "layers": {
      "description": "Elenco dei raggruppamenti di layer",
      "type": "array",
      "title": "Gruppi",
      "items": {
        "type": "object",
        "title": "Gruppo",
        "headerTemplate": "{{ self.layerName }}",
        "properties": {
          "gid": {
            "title": "Identificativo univoco",
            "description": "Identificatore globale univoco ",
            "type": "string"
          },
          "layerName": {
            "title": "Titolo",
            "description": "Nome del layer (visualizzato in mappa)",
            "type": "string"
          },
          "layerType": {
            "title": "Tipologia",
            "description": "Tipologia di layer",
            "type": "string",
            "enum": ["group"]
          },
          "visible": {
            "title": "Visibilità",
            "description": "Visibilità iniziale in mappa",
            "enum": [0, 1],
            "type": "integer"
          },
          "color": {
            "title": "Colore del gruppo",
            "description": "Colore del gruppo. Possono essere inserite classi css come i colori forniti da materialize",
            "enum": [
              "red",
              "pink",
              "purple",
              "deep-purple",
              "blue",
              "light-blue",
              "cyan",
              "teal",
              "green",
              "light-green",
              "lime",
              "yellow",
              "amber",
              "orange",
              "deep-orange",
              "brown",
              "grey",
              "blue-grey",
              "black"
            ],
            "type": "string"
          },
          "layers": {
            "title": "Livelli",
            "description": "Array dei layer catografici appartenenti al gruppo",
            "type": "array",
            "items": {
              "type": "object",
              "title": "Livello",
              "headerTemplate": "{{ self.layerName }}",
              "properties": {
                "gid": {
                  "title": "identificativo univoco",
                  "description": "Identificatore globale univoco",
                  "type": "string"
                },
                "layerName": {
                  "title": "Titolo",
                  "description": "Nome del layer (visualizzato in mappa)",
                  "type": "string"
                },
                "mapUri": {
                  "title": "URL (WMS, TMS)",
                  "description": "Url base del layer. Es: http://localhost:8080/geoserver/wms?",
                  "type": "string"
                },
                "layerType": {
                  "title": "Tipologia",
                  "description": "Tipologia del layer",
                  "enum": ["wmstiled", "wms", "osm"],
                  "type": "string",
                  "default": "wmstiled"
                },
                "layer": {
                  "title": "Nome Layer",
                  "description": "Nome del layer WMS da visualizzare. Per geoserver mettere workspace:nome del layer Es: stradario:civici",
                  "type": "string"
                },
                "srs": {
                  "title": "SRID",
                  "description": "SRID del layer. Es: 3857 (al momento è supportato solo il 3857)",
                  "enum": ["3857"],
                  "type": "string"
                },
                "opacity": {
                  "title": "Opacità",
                  "description": "Trasparenza iniziale del layer",
                  "enum": [1, 0.9, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1, 0],
                  "type": "number"
                },
                "params": {
                  "title": "Parametri aggiuntivi",
                  "description": "Parametri aggiuntivi da aggiungere alla chiamata WMS. Per maggiori informazioni consultare la specifica del WMS",
                  "type": "string"
                },
                "tileMode": {
                  "title": "Tipologia Tile",
                  "description": "Tipologia di tile da utilizare. Lasciare vuoto per il formato server predefinito",
                  "enum": ["", "xyz", "quadkey"],
                  "type": "string"
                },
                "visible": {
                  "title": "Visibilità",
                  "description": "Visibilità iniziale in mappa",
                  "enum": [0, 1],
                  "type": "integer"
                },
                "queryable": {
                  "title": "Layer interrogabile",
                  "description": "Definire se il layer è interrogabile tramite click, se visibile.",
                  "enum": [0, 1],
                  "type": "integer"
                },
                "searchable": {
                  "title": "Layer ricercabile",
                  "description": "Definire se il layer è ricercabile.",
                  "enum": [0, 1],
                  "type": "integer"
                },
                "searchField": {
                  "title": "Campo di ricerca",
                  "description": "Campo su cui effettuare la ricerca. Deve essere un campo di tipo string",
                  "type": "string"
                },
                "labelField": {
                  "title": "Campo etichetta",
                  "description": "Campo da utilizzare come etichetta. Deve essere un campo di tipo string",
                  "type": "string"
                },
                "zIndex": {
                  "title": "Ordine del livello",
                  "description": "Ordine di visualizzazione in mappa",
                  "minimum": 0,
                  "type": "integer"
                },
                "attribution": {
                  "title": "Attribuzione del layer",
                  "description": "Attribuzione dei diritti da visualizzare per il layer",
                  "type": "string"
                },
                "legendUrl": {
                  "title": "Legenda personalizzata",
                  "description": "Url della legenda personalizzata",
                  "type": "string"
                },
                "hideLegend": {
                  "title": "Nascondi Legenda",
                  "description": "Nasconde la legenda se non disponibile",
                  "type": "boolean"
                },
                "templateUri": {
                  "title": "Url del template",
                  "description": "Url assoluto o nome del file del repo. Se lasciato vuoto viene impostato il gid del layer con estensione .json utilizzando il repo",
                  "type": "string"
                },
                "secured": {
                  "title": "Autorizzazione richiesta",
                  "description": "Il layer richiede la basic authentication",
                  "type": "boolean"
                }
              },
              "required": [
                "gid",
                "mapUri",
                "layerType",
                "layerName",
                "layer",
                "srs",
                "opacity",
                "params",
                "tileMode",
                "visible",
                "queryable",
                "labelField",
                "zIndex"
              ]
            }
          }
        },
        "required": ["gid", "layerType", "layerName", "visible", "layers"]
      }
    }
  },
  "required": [
    "restAPIUrl",
    "title",
    "startMapLon",
    "startMapLat",
    "startMapZoom",
    "modules",
    "layers"
  ]
}
